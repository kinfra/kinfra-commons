plugins {
    id 'ru.kontur.library' version '4.4'
    id 'org.jetbrains.kotlin.jvm' version '1.3.61'
}

ext {
    release = '1.4'

    versions = [
        assertj: '3.14.0',
        coroutines: '1.3.3',
    ]

    branch = project.properties["branch"]?.toString()
    isStableBranch = (branch == "master") || branch?.startsWith("release-")
    version = release + (isStableBranch ? '' : '-SNAPSHOT')
}

group = "ru.kontur.kinfra"
version = ext.version

sourceCompatibility = 8

dependencies {
    allMain platform("org.jetbrains.kotlinx:kotlinx-coroutines-bom:${versions.coroutines}")

    implementation "org.jetbrains.kotlinx:kotlinx-coroutines-jdk8"

    testImplementation "org.assertj:assertj-core:${versions.assertj}"
}
